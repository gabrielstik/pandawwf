function reset(){id=0,braco=[],bracodiv.innerHTML=""}function spawn(o){braco=[],id=0;for(var a=0;a<4*o;a+=4){id++;var r=Math.floor(3*Math.random());posY=Math.floor(550*Math.random()),posX=Math.floor(5e3*Math.random())+1e3,speed=1*Math.random()+3,braco[a]=id,braco[a+1]=posY,braco[a+2]=posX,braco[a+3]=speed,bracodiv.innerHTML+=1==r?'<div class="braco-'+id+'"><img src="../assets/img/braco-hache.gif"/></div>':2==r?'<div class="braco-'+id+'"><img src="../assets/img/braco-couto.gif"/></div>':'<div class="braco-'+id+'"><img src="../assets/img/braco-fusil.gif"/></div>',document.querySelector(".braco-"+id).style.top=posY+"px",document.querySelector(".braco-"+id).style.left=posX+"px"}move()}function move(){bracoloop=setInterval(function(){for(var o=0;o<braco.length;o+=4)braco[o+1]-pandaY<=50&&braco[o+1]-pandaY>=-50&&braco[o+2]-pandaX<=50&&braco[o+2]-pandaX>=-20&&(contact=!0,pandaX=braco[o+2]-50,document.querySelector(".character").style.left=pandaX+"px"),braco[o+2]-=braco[o+3],document.querySelector(".braco-"+braco[o]).style.left=braco[o+2]+"px"},20)}var bracodiv=document.querySelector(".braco");$(document).ready(function(){try{clearInterval(bracoloop)}catch(o){}});
function daisies(){daiX=Math.floor(1e3*Math.random()),daiY=Math.floor(550*Math.random()),fen.innerHTML+='<div class="dai-'+i+'"></div>',$(".dai-"+i).css({left:daiX,top:daiY})}$(document).ready(function(){for(fen=document.querySelector(".daisies"),i=0;i<50;i++)daisies()});
function ice(){iceX=Math.floor(950*Math.random())+50,iceY=Math.floor(550*Math.random()),fen4.innerHTML='<div class="ice-o"></div>',$(".ice-o").css({left:iceX,top:iceY})}function createice(){coinnumber<5&&setTimeout(function(){var e=Math.floor(5e3*Math.random())+2e3;setTimeout(function(){ice()},e)},200)}function iceeffect(){clearInterval(bracoloop),setTimeout(move,1500)}iceX=0,iceY=0,fen4=document.querySelector(".ices"),setTimeout(createice,5e3);
function item(){coinnumber<5&&(itemX=Math.floor(950*Math.random())+50,itemY=Math.floor(550*Math.random()),fen3.innerHTML='<div class="item-coin"></div>',$(".item-coin").css({left:itemX,top:itemY}))}function createitem(){coinnumber<5&&setTimeout(function(){var t=Math.floor(5e3*Math.random())+2e3;setTimeout(function(){item()},t)},200)}function pluscoin(){startMusic(coinMusic),setTimeout("stopMusic(coinMusic);",1e3),coin++,$(".coins-counter span").html(coin)}itemX=0,itemY=0,coinnumber=0,$(document).ready(function(){fen3=document.querySelector(".items"),setTimeout("createitem();",5e3)});
function switchen(){lang="en",$(".fr").css({display:"none"}),$(".en").css({display:"block"})}function switchfr(){lang="fr",$(".en").css({display:"none"}),$(".fr").css({display:"block"});try{$(".sentence").html("Jouons pour sauver le panda")}catch(n){}}lang="en";
$(document).ready(function(){$("#div1").fadeIn(1e3,function(){$("#div2").fadeIn(2e3,function(){$("#div3").fadeIn(1e3)})})}),$(document).ready(function(){$(".button-play").mouseover(function(){$(".play-zone img").css("bottom","-8px")}),$(".button-play").mouseout(function(){$(".play-zone img").css("bottom","-75px")})}),$(document).ready(function(){$(".legals").click(function(){$(".overlay").fadeIn(300)})}),$(document).ready(function(){$(".closePopup").click(function(){$(".overlay").fadeOut(300)})});
function keyPressed(){var e=0,a=0,t=0,c=0;pandaX=100,pandaY=275;document.body.onkeydown=function(n){37==n.keyCode&&0==blocked&&(a=1,contact=!1),38==n.keyCode&&0==blocked&&(e=1,contact=!1),0==contact&&0==blocked&&39==n.keyCode&&(t=0==contact?1:0),40==n.keyCode&&0==blocked&&(c=1,contact=!1)},document.body.onkeyup=function(n){37==n.keyCode?a=0:38==n.keyCode?e=0:39==n.keyCode?0==contact&&(t=0):40==n.keyCode&&(c=0)},moveInterval=setInterval(function(){0==contact?(pandaX+=3*(t-a),pandaY+=3*(c-e)):pandaY+=4*(c-e),pandaY<0&&(pandaY=0),pandaY>530&&(pandaY=530),document.querySelector(".character").style.top=pandaY+"px",document.querySelector(".character").style.left=pandaX+"px",0!=c&&0==a&&0==t?$(".character").css("transform","rotate(0deg)"):0!=c&&0!=a&&0==t?$(".character").css("transform","rotate(45deg)"):0!=c&&0==a&&0!=t?$(".character").css("transform","rotate(305deg)"):0!=e&&0==a&&0==t?$(".character").css("transform","rotate(180deg)"):0!=e&&0!=a&&0==t?$(".character").css("transform","rotate(135deg)"):0!=e&&0==a&&0!=t?$(".character").css("transform","rotate(225deg)"):0!=a?$(".character").css("transform","rotate(90deg)"):0!=t&&$(".character").css("transform","rotate(270deg)"),pandaX<=25&&0==perdu&&(perdu=!0,lose()),pandaX>=975&&0==gagne&&(gagne=!0,win()),itemY-pandaY<=40&&itemY-pandaY>=-40&&itemX-pandaX<=40&&itemX-pandaX>=-40&&0==hasCoin&&(hasCoin=!0,fen3.innerHTML="",createitem(),coin<5&&pluscoin(),setTimeout("hasCoin = false;",2e3)),iceY-pandaY<=40&&iceY-pandaY>=-40&&iceX-pandaX<=40&&iceX-pandaX>=-40&&0==hasIce&&(hasIce=!0,fen4.innerHTML="",createice(),iceeffect(),setTimeout("hasIce = false;",2e3))},20)}contact=!1,perdu=!1,gagne=!1,coin=0,hasCoin=!1,hasIce=!1,blocked=!0;
function launch(){1==restart?location.reload():(reset(),nextLevel())}function nextLevel(){pandaX=100,pandaY=275,character.style.left=pandaX,character.style.top=pandaY,$(".end-window").fadeOut(100),setTimeout("backCount();",1e3),stopMusic(gameMusic),stopMusic(winMusic),stopMusic(loseMusic)}function backCount(){"fr"==lang?$(".context").html("NIV "+level):$(".context").html("STAGE "+level),$(".context").fadeIn(500),setTimeout("$('.context').html('3');",1e3),setTimeout("$('.context').html('2');",2e3),setTimeout("$('.context').html('1');startMusic(gameMusic);",3e3),setTimeout("$('.context').html('GO!');$('.context').fadeOut(500);keyPressed();",4e3),setTimeout(function(){switch(level){case 1:blocked=!1,spawn(80);break;case 2:blocked=!1,spawn(120);break;case 3:blocked=!1,spawn(160)}gagne=!1,perdu=!1},4e3)}function lose(){blocked=!0,clearInterval(bracoloop),stopMusic(gameMusic),stopMusic(winMusic),startMusic(loseMusic),$(".end-window").css({"background-image":"url(../assets/img/panda-triste.png)"}),"fr"==lang?$(".sentence").html("Vous ne l'avez pas sauvé. Sauvez les en vrai, faites un don !"):$(".sentence").html("You didn't save him. Save them in real life, donate !"),$(".stage").fadeOut(),"fr"==lang?$(".launch-button").html("Rééssayer"):$(".launch-button").html("Restart"),restart=!0,"fr"==lang?$(".context").html("CAPUTURÉ"):$(".context").html("CAUGHT"),$(".context").fadeIn(500),setTimeout("$('.context').fadeOut(200);$('.end-window').fadeIn(500);",2e3)}function win(){blocked=!0,clearInterval(bracoloop),stopMusic(gameMusic),stopMusic(loseMusic),startMusic(winMusic),setInterval(function(){winMusic.addEventListener("ended",function(){winMusic.load(),winMusic.play()},!1)},100),"fr"==lang?$(".launch-button").html("Niveau suivant"):$(".launch-button").html("Next level"),1==level?"fr"==lang?$(".sentence").html("Le panda géant a été ajouté à la liste des espèces menacées dès 1990."):$(".sentence").html("The giant panda has been on the endangered species list since 1990."):2==level?"fr"==lang?$(".sentence").html("De 1974 à 1989, la moitié des habitats en Chine a été détruite par l'activité humaine."):$(".sentence").html("From 1974 to 1989, half of the panda’s habitat in China’s Sichuan areas was destroyed by human activity."):("fr"==lang?$(".sentence").html("Vous avez gagné "+coin+" en sauvant le panda ; sauvez les vraiment en faisant un don !<br/>Si vous faites un don, "+coin+"€ seront ajoutés à votre don!"):$(".sentence").html("You earn "+coin+" coins saving the panda. Save him in real life by donating !<br/>If you donate, "+coin+"€ would be added !"),"fr"==lang?($(".launch-button").html("Faire un don"),$(".launch-button").attr("onclick",'window.location="https://faireundon.wwf.fr/"')):($(".launch-button").html("Donate"),$(".launch-button").attr("onclick",'window.location="https://faireundon.wwf.fr/"'))),"fr"==lang?$(".context").html("SAUVÉ!"):$(".context").html("SAVED!"),$(".context").fadeIn(500),level++,"fr"==lang?$(".context").html("SAUVÉ!"):$(".context").html("SAVED!"),setTimeout(function(){$(".context").fadeOut(1e3)}),setTimeout(function(){"fr"==lang?($(".context").html("NIV "+level),$(".context").html("NIV "+level)):($(".context").html("STAGE "+level),$(".context").html("STAGE "+level))},1500),setTimeout("$('.end-window').fadeIn(500);",2500)}function startMusic(e){e.play()}function stopMusic(e){e.pause(),e.currentTime=0}level=1,restart=!1,gameMusic=document.querySelector("#gameMusic"),loseMusic=document.querySelector("#loseMusic"),winMusic=document.querySelector("#winMusic"),character=document.querySelector(".character");
function trees(){treX=Math.floor(900*Math.random())+100,treY=Math.floor(550*Math.random()),fen2.innerHTML+='<div class="tre-'+j+'"></div>',$(".tre-"+j).css({left:treX,top:treY})}function rowtrees(){for(k=0;k<13;k++)document.querySelector(".row-trees-top").innerHTML+='<div class="row-tree"></div>',document.querySelector(".row-trees-bottom").innerHTML+='<div class="row-tree"></div>'}$(document).ready(function(){for(rowtrees(),fen2=document.querySelector(".trees"),j=0;j<5;j++)trees()});
nbdaisies=50,nbtrees=5;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS1icmFjby5qcyIsImZsb3dlcnMuanMiLCJpY2UuanMiLCJpdGVtLmpzIiwibGFuZy5qcyIsIm1haW4uanMiLCJtb3ZlLmpzIiwic3RhcnQuanMiLCJ0cmVlcy5qcyIsInZhcnMuanMiXSwibmFtZXMiOlsicmVzZXQiLCJpZCIsImJyYWNvIiwiYnJhY29kaXYiLCJpbm5lckhUTUwiLCJzcGF3biIsIm5iYnJhY29zIiwiaSIsInR5cGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3NZIiwicG9zWCIsInNwZWVkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJ0b3AiLCJsZWZ0IiwibW92ZSIsImJyYWNvbG9vcCIsInNldEludGVydmFsIiwiaiIsImxlbmd0aCIsInBhbmRhWSIsInBhbmRhWCIsImNvbnRhY3QiLCIkIiwicmVhZHkiLCJjbGVhckludGVydmFsIiwiZSIsImRhaXNpZXMiLCJkYWlYIiwiZGFpWSIsImZlbiIsImNzcyIsImljZSIsImljZVgiLCJpY2VZIiwiZmVuNCIsImNyZWF0ZWljZSIsImNvaW5udW1iZXIiLCJzZXRUaW1lb3V0IiwicmFuIiwiaWNlZWZmZWN0IiwiaXRlbSIsIml0ZW1YIiwiaXRlbVkiLCJmZW4zIiwiY3JlYXRlaXRlbSIsInBsdXNjb2luIiwic3RhcnRNdXNpYyIsImNvaW5NdXNpYyIsImNvaW4iLCJodG1sIiwic3dpdGNoZW4iLCJsYW5nIiwiZGlzcGxheSIsInN3aXRjaGZyIiwiZmFkZUluIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJjbGljayIsImZhZGVPdXQiLCJrZXlQcmVzc2VkIiwidXAiLCJyaWdodCIsImRvd24iLCJib2R5Iiwib25rZXlkb3duIiwia2V5Q29kZSIsImJsb2NrZWQiLCJvbmtleXVwIiwibW92ZUludGVydmFsIiwicGVyZHUiLCJsb3NlIiwiZ2FnbmUiLCJ3aW4iLCJoYXNDb2luIiwiaGFzSWNlIiwibGF1bmNoIiwicmVzdGFydCIsImxvY2F0aW9uIiwicmVsb2FkIiwibmV4dExldmVsIiwiY2hhcmFjdGVyIiwic3RvcE11c2ljIiwiZ2FtZU11c2ljIiwid2luTXVzaWMiLCJsb3NlTXVzaWMiLCJiYWNrQ291bnQiLCJsZXZlbCIsImJhY2tncm91bmQtaW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwibG9hZCIsInBsYXkiLCJhdHRyIiwibXVzaWMiLCJwYXVzZSIsImN1cnJlbnRUaW1lIiwidHJlZXMiLCJ0cmVYIiwidHJlWSIsImZlbjIiLCJyb3d0cmVlcyIsImsiLCJuYmRhaXNpZXMiLCJuYnRyZWVzIl0sIm1hcHBpbmdzIjoiQUFFQSxRQUFTQSxTQUNSQyxHQUFLLEVBQ0xDLFNBQ0FDLFNBQVNDLFVBQVUsR0FHcEIsUUFBU0MsT0FBTUMsR0FDYkosU0FDQUQsR0FBSyxDQUNMLEtBQUssR0FBSU0sR0FBSSxFQUFHQSxFQUFhLEVBQVRELEVBQVlDLEdBQUcsRUFBRyxDQUNwQ04sSUFDQSxJQUFJTyxHQUFPQyxLQUFLQyxNQUFvQixFQUFkRCxLQUFLRSxTQUMzQkMsTUFBT0gsS0FBS0MsTUFBb0IsSUFBZEQsS0FBS0UsVUFDdkJFLEtBQU9KLEtBQUtDLE1BQW9CLElBQWRELEtBQUtFLFVBQWUsSUFDdENHLE1BQXNCLEVBQWRMLEtBQUtFLFNBQVcsRUFDeEJULE1BQU1LLEdBQUtOLEdBQ1hDLE1BQU1LLEVBQUUsR0FBS0ssS0FDYlYsTUFBTUssRUFBRSxHQUFLTSxLQUNiWCxNQUFNSyxFQUFFLEdBQUtPLE1BRVhYLFNBQVNDLFdBREMsR0FBUkksRUFDa0IscUJBQXFCUCxHQUFHLHFEQUU3QixHQUFSTyxFQUNhLHFCQUFxQlAsR0FBRyxxREFHeEIscUJBQXFCQSxHQUFHLHFEQUU5Q2MsU0FBU0MsY0FBYyxVQUFVZixJQUFJZ0IsTUFBTUMsSUFBSU4sS0FBSyxLQUNwREcsU0FBU0MsY0FBYyxVQUFVZixJQUFJZ0IsTUFBTUUsS0FBS04sS0FBSyxLQUV2RE8sT0FHRixRQUFTQSxRQUNQQyxVQUFZQyxZQUFZLFdBQ3RCLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJ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TSxXQUdoQixJQUZBNEUsV0FDQUQsS0FBT3pGLFNBQVNDLGNBQWMsVUFDekJPLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNqQjhFO0FDdkJKTSxVQUFZLEdBQ1pDLFFBQVUiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYnJhY29kaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJyYWNvXCIpO1xuXG5mdW5jdGlvbiByZXNldCgpIHsgLy8gbWFpbiByZXNldCBmdW5jdGlvbiBmb3IgYnJhY29zXG5cdGlkID0gMDtcblx0YnJhY28gPSBbXTtcblx0YnJhY29kaXYuaW5uZXJIVE1MPScnO1xufVxuXG5mdW5jdGlvbiBzcGF3bihuYmJyYWNvcykgeyAvLyBjcmVhdGluZyBicmFjb3NcbiAgYnJhY28gPSBbXTtcbiAgaWQgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG5iYnJhY29zKjQ7IGkrPTQpwqB7XG4gICAgaWQrKztcbiAgICB2YXIgdHlwZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSozKTtcbiAgICBwb3NZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjU1MCk7XG4gICAgcG9zWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1MDAwKSsxMDAwO1xuICAgIHNwZWVkID0gTWF0aC5yYW5kb20oKSoxKzM7XG4gICAgYnJhY29baV0gPSBpZDtcbiAgICBicmFjb1tpKzFdID0gcG9zWTtcbiAgICBicmFjb1tpKzJdID0gcG9zWDtcbiAgICBicmFjb1tpKzNdID0gc3BlZWQ7XG4gICAgaWYgKHR5cGUgPT0gMSkge1xuICAgICAgYnJhY29kaXYuaW5uZXJIVE1MKz0nPGRpdiBjbGFzcz1cImJyYWNvLScraWQrJ1wiPjxpbWcgc3JjPVwiLi4vYXNzZXRzL2ltZy9icmFjby1oYWNoZS5naWZcIi8+PC9kaXY+JztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PSAyKSB7XG4gICAgICBicmFjb2Rpdi5pbm5lckhUTUwrPSc8ZGl2IGNsYXNzPVwiYnJhY28tJytpZCsnXCI+PGltZyBzcmM9XCIuLi9hc3NldHMvaW1nL2JyYWNvLWNvdXRvLmdpZlwiLz48L2Rpdj4nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGJyYWNvZGl2LmlubmVySFRNTCs9JzxkaXYgY2xhc3M9XCJicmFjby0nK2lkKydcIj48aW1nIHNyYz1cIi4uL2Fzc2V0cy9pbWcvYnJhY28tZnVzaWwuZ2lmXCIvPjwvZGl2Pic7XG4gICAgfVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnJhY28tXCIraWQpLnN0eWxlLnRvcD1wb3NZK1wicHhcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJyYWNvLVwiK2lkKS5zdHlsZS5sZWZ0PXBvc1grXCJweFwiO1xuICB9XG4gIG1vdmUoKTtcbn1cblxuZnVuY3Rpb24gbW92ZSgpIHsgLy8gYnJhY29zIG1vdmVcbiAgYnJhY29sb29wID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBicmFjby5sZW5ndGg7IGorPTQpIHtcbiAgICAgIGlmIChicmFjb1tqKzFdIC0gcGFuZGFZIDw9IDUwICYmIGJyYWNvW2orMV0gLSBwYW5kYVkgPj0gLTUwICYmIGJyYWNvW2orMl0gLSBwYW5kYVggPD0gNTAgJiYgYnJhY29baisyXSAtIHBhbmRhWCA+PSAtMjApIHtcbiAgICAgICAgY29udGFjdCA9IHRydWU7XG4gICAgICAgIHBhbmRhWCA9IGJyYWNvW2orMl0tNTA7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcmFjdGVyXCIpLnN0eWxlLmxlZnQ9cGFuZGFYK1wicHhcIjtcbiAgICAgIH1cbiAgICAgIGJyYWNvW2orMl0gLT0gYnJhY29baiszXTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnJhY28tXCIrYnJhY29bal0pLnN0eWxlLmxlZnQ9YnJhY29baisyXStcInB4XCI7XG4gICAgfVxuICB9LDIwKTtcbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIC8vIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBjbGVhckludGVydmFsKGJyYWNvbG9vcCk7XG4gICAgfVxuICAgIGNhdGNoKGUpIHt9XG4gIC8vIH0sNjAwMCk7XG59KTtcbiIsImZ1bmN0aW9uIGRhaXNpZXMoKSB7IC8qIGNyZWF0aW5nIGRhaXNpZXMgKi9cbiAgZGFpWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwKTtcbiAgZGFpWSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1NTApO1xuICBmZW4uaW5uZXJIVE1MKz0nPGRpdiBjbGFzcz1cImRhaS0nK2krJ1wiPjwvZGl2Pic7XG4gICQoJy5kYWktJytpKS5jc3Moe1xuICAgIFwibGVmdFwiOiBkYWlYLFxuICAgIFwidG9wXCI6IGRhaVlcbiAgfSk7XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICBmZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhaXNpZXNcIik7XG4gIGZvciAoaSA9IDA7IGkgPCA1MDsgaSsrKSB7XG4gICAgZGFpc2llcygpO1xuICB9XG59KTtcbiIsImljZVggPSAwO1xuaWNlWSA9IDA7XG5mZW40ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmljZXMnKTtcblxuLyogc2FtZSBhcyBpdGVtIHNwYXduaW5nICovXG5cbmZ1bmN0aW9uIGljZSgpIHtcbiAgaWNlWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo5NTApKzUwO1xuICBpY2VZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjU1MCk7XG4gIGZlbjQuaW5uZXJIVE1MPSc8ZGl2IGNsYXNzPVwiaWNlLW9cIj48L2Rpdj4nO1xuICAkKCcuaWNlLW8nKS5jc3Moe1xuICAgIFwibGVmdFwiOiBpY2VYLFxuICAgIFwidG9wXCI6IGljZVlcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZWljZSgpIHtcbiAgaWYgKGNvaW5udW1iZXIgPCA1KSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpwqB7XG4gICAgICB2YXIgcmFuID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjUwMDApKzIwMDA7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpY2UoKTtcbiAgICAgIH0scmFuKTtcbiAgICB9LDIwMCk7XG4gIH1cbn1cblxuc2V0VGltZW91dChjcmVhdGVpY2UsNTAwMCk7XG5cbmZ1bmN0aW9uIGljZWVmZmVjdCgpIHtcbiAgY2xlYXJJbnRlcnZhbChicmFjb2xvb3ApO1xuICBzZXRUaW1lb3V0KG1vdmUsMTUwMCk7XG59XG4iLCJpdGVtWCA9IDA7XG5pdGVtWSA9IDA7XG5jb2lubnVtYmVyID0gMDtcblxuZnVuY3Rpb24gaXRlbSgpIHsgLyogY3JlYXRlIGNvaW5zICovXG4gIGlmIChjb2lubnVtYmVyIDwgNSkge1xuICAgIGl0ZW1YID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjk1MCkrNTA7XG4gICAgaXRlbVkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqNTUwKTtcbiAgICBmZW4zLmlubmVySFRNTD0nPGRpdiBjbGFzcz1cIml0ZW0tY29pblwiPjwvZGl2Pic7XG4gICAgJCgnLml0ZW0tY29pbicpLmNzcyh7XG4gICAgICBcImxlZnRcIjogaXRlbVgsXG4gICAgICBcInRvcFwiOiBpdGVtWVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZWl0ZW0oKSB7IC8qIGNyZWF0ZSBjb2lucyBsb29wICovXG4gIGlmIChjb2lubnVtYmVyIDwgNSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKcKge1xuICAgICAgdmFyIHJhbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1MDAwKSsyMDAwO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaXRlbSgpO1xuICAgICAgfSxyYW4pO1xuICAgIH0sMjAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwbHVzY29pbigpIHsgLyogYWRkIHNjb3JlICovXG4gIHN0YXJ0TXVzaWMoY29pbk11c2ljKTtcbiAgc2V0VGltZW91dCgnc3RvcE11c2ljKGNvaW5NdXNpYyk7JywxMDAwKTtcbiAgY29pbisrO1xuICAkKCcuY29pbnMtY291bnRlciBzcGFuJykuaHRtbChjb2luKTtcbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIGZlbjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1zXCIpO1xuICBzZXRUaW1lb3V0KCdjcmVhdGVpdGVtKCk7Jyw1MDAwKTtcbn0pO1xuIiwiLyogbGFuZyBzd2l0Y2hlcyAqL1xuXG5sYW5nID0gJ2VuJztcblxuZnVuY3Rpb24gc3dpdGNoZW4oKSB7XG4gIGxhbmcgPSAnZW4nO1xuICAkKCcuZnInKS5jc3Moe2Rpc3BsYXk6IFwibm9uZVwifSk7XG4gICQoJy5lbicpLmNzcyh7ZGlzcGxheTogXCJibG9ja1wifSk7XG59XG5cbmZ1bmN0aW9uIHN3aXRjaGZyKCkge1xuICBsYW5nID0gJ2ZyJztcbiAgJCgnLmVuJykuY3NzKHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xuICAkKCcuZnInKS5jc3Moe2Rpc3BsYXk6IFwiYmxvY2tcIn0pO1xuICB0cnkge1xuICAgICQoJy5zZW50ZW5jZScpLmh0bWwoXCJKb3VvbnMgcG91ciBzYXV2ZXIgbGUgcGFuZGFcIik7XG4gIH1cbiAgY2F0Y2goZSkge31cbn1cbiIsIi8vRmFkZSBJbiBjb250YWluZXJcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICQoXCIjZGl2MVwiKS5mYWRlSW4oMTAwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgJChcIiNkaXYyXCIpLmZhZGVJbigyMDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICQoXCIjZGl2M1wiKS5mYWRlSW4oMTAwMClcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcblxyXG4vL1BhbmRhIEhvdmVyIEJ1dG9uIEFuaW1hdGlvblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5idXR0b24tcGxheVwiKS5tb3VzZW92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgJChcIi5wbGF5LXpvbmUgaW1nXCIpLmNzcyhcImJvdHRvbVwiLCBcIi04cHhcIik7XHJcbiAgfSk7XHJcbiAgJChcIi5idXR0b24tcGxheVwiKS5tb3VzZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiLnBsYXktem9uZSBpbWdcIikuY3NzKFwiYm90dG9tXCIsIFwiLTc1cHhcIik7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy9MZWdhbCBOb3RpY2VzIFBvcFVwXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAkKFwiLmxlZ2Fsc1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiLm92ZXJsYXlcIikuZmFkZUluKDMwMClcclxuICB9KTtcclxufSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgJChcIi5jbG9zZVBvcHVwXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIub3ZlcmxheVwiKS5mYWRlT3V0KDMwMClcclxuICB9KTtcclxufSk7IiwiY29udGFjdCA9IGZhbHNlO1xucGVyZHUgPSBmYWxzZTtcbmdhZ25lID0gZmFsc2U7XG5jb2luID0gMDtcbmhhc0NvaW4gPSBmYWxzZTtcbmhhc0ljZSA9IGZhbHNlO1xuYmxvY2tlZCA9IHRydWU7XG5cbmZ1bmN0aW9uIGtleVByZXNzZWQoKSB7IC8vIGlmIGtleSBwcmVzc2VkXG5cdHZhciB1cCA9IDA7XG5cdHZhciBsZWZ0ID0gMDtcblx0dmFyIHJpZ2h0ID0gMDtcblx0dmFyIGRvd24gPSAwO1xuXHR2YXIgcm90YXRlVXAgPSAxODA7XG5cdHZhciByb3RhdGVEb3duID0gMDtcblx0dmFyIHJvdGF0ZUxlZnQgPSA5MDtcblx0dmFyIHJvdGF0ZVJpZ2h0ID0gMjcwO1xuXHR2YXIgcm90YXRlQWN0dWVsID0gMjcwO1xuXHRwYW5kYVggPSAxMDA7XG5cdHBhbmRhWSA9IDI3NTtcblx0dmFyIHNwZWVkID0gMztcblx0dmFyIHNwID0gMTtcblx0dmFyIHJvdGF0ZVNwZWVkID0gOTtcblxuXHRkb2N1bWVudC5ib2R5Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGUpIHtcblxuXHRcdGlmIChlLmtleUNvZGUgPT0gMzcgJiYgYmxvY2tlZCA9PSBmYWxzZSkgeyAvL2xlZnRBcnJvd1xuXHRcdFx0bGVmdCA9IDEgKiBzcDtcblx0XHRcdGNvbnRhY3QgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRpZihlLmtleUNvZGUgPT0gMzggJiYgYmxvY2tlZCA9PSBmYWxzZSkgeyAvL3VwQXJyb3dcblx0XHRcdHVwID0gMSAqIHNwO1xuXHRcdFx0Y29udGFjdCA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmIChjb250YWN0ID09IGZhbHNlICYmIGJsb2NrZWQgPT0gZmFsc2UpIHtcblx0XHRcdGlmKGUua2V5Q29kZSA9PSAzOSkgeyAvL3JpZ2h0QXJyb3dcblx0XHRcdFx0aWYgKGNvbnRhY3QgPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdHJpZ2h0ID0gMSAqIHNwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHJpZ2h0ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmKGUua2V5Q29kZSA9PSA0MCAmJiBibG9ja2VkID09IGZhbHNlKSB7IC8vZG93bkFycm93XG5cdFx0XHRkb3duID0gMSAqIHNwO1xuXHRcdFx0Y29udGFjdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGRvY3VtZW50LmJvZHkub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRpZiAoZS5rZXlDb2RlID09IDM3KSB7IC8vbGVmdEFycm93XG5cdFx0XHRsZWZ0ID0gMDtcblx0XHR9XG5cdFx0ZWxzZSBpZihlLmtleUNvZGUgPT0gMzgpIHsgLy91cEFycm93XG5cdFx0XHR1cCA9IDA7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZS5rZXlDb2RlID09IDM5KSB7IC8vcmlnaHRBcnJvd1xuXHRcdFx0aWYgKGNvbnRhY3QgPT0gZmFsc2UpIHtcblx0XHRcdFx0cmlnaHQgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmKGUua2V5Q29kZSA9PSA0MCkgeyAvL2Rvd25BcnJvd1xuXHRcdFx0ZG93biA9IDA7XG5cdFx0fVxuXHR9XG5cblx0bW92ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gbW92ZUJyYWNvKCkge1xuXHRcdGlmIChjb250YWN0ID09IGZhbHNlKSB7XG5cdFx0XHRwYW5kYVggKz0gKHJpZ2h0IC0gbGVmdCkqc3BlZWQ7XG5cdFx0XHRwYW5kYVkgKz0gKGRvd24gLSB1cCkqc3BlZWQ7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cGFuZGFZICs9IChkb3duIC0gdXApKihzcGVlZCsxKTtcblx0XHR9XG5cdFx0aWYocGFuZGFZIDwgMCkge1xuXHRcdFx0cGFuZGFZID0gMDtcblx0XHR9XG5cdFx0aWYocGFuZGFZID4gNjAwLTcwKSB7XG5cdFx0XHRwYW5kYVkgPSA2MDAtNzA7XG5cdFx0fVxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhcmFjdGVyXCIpLnN0eWxlLnRvcCA9IHBhbmRhWStcInB4XCI7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFyYWN0ZXJcIikuc3R5bGUubGVmdCA9IHBhbmRhWCtcInB4XCI7XG5cdFx0aWYgKGRvd24gIT0gMCAmJiBsZWZ0ID09IDAgJiYgcmlnaHQgPT0gMCkge1xuXHRcdFx0JChcIi5jaGFyYWN0ZXJcIikuY3NzKFwidHJhbnNmb3JtXCIsXCJyb3RhdGUoMGRlZylcIik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGRvd24gIT0gMCAmJiBsZWZ0ICE9IDAgJiYgcmlnaHQgPT0gMCkge1xuXHRcdFx0JChcIi5jaGFyYWN0ZXJcIikuY3NzKFwidHJhbnNmb3JtXCIsXCJyb3RhdGUoNDVkZWcpXCIpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChkb3duICE9IDAgJiYgbGVmdCA9PSAwICYmIHJpZ2h0ICE9IDApIHtcblx0XHRcdCQoXCIuY2hhcmFjdGVyXCIpLmNzcyhcInRyYW5zZm9ybVwiLFwicm90YXRlKDMwNWRlZylcIik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHVwICE9IDAgJiYgbGVmdCA9PSAwICYmIHJpZ2h0ID09IDApIHtcblx0XHRcdCQoXCIuY2hhcmFjdGVyXCIpLmNzcyhcInRyYW5zZm9ybVwiLFwicm90YXRlKDE4MGRlZylcIik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHVwICE9IDAgJiYgbGVmdCAhPSAwICYmIHJpZ2h0ID09IDApIHtcblx0XHRcdCQoXCIuY2hhcmFjdGVyXCIpLmNzcyhcInRyYW5zZm9ybVwiLFwicm90YXRlKDEzNWRlZylcIik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHVwICE9IDAgJiYgbGVmdCA9PSAwICYmIHJpZ2h0ICE9IDApIHtcblx0XHRcdCQoXCIuY2hhcmFjdGVyXCIpLmNzcyhcInRyYW5zZm9ybVwiLFwicm90YXRlKDIyNWRlZylcIik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGxlZnQgIT0gMCkge1xuXHRcdFx0JChcIi5jaGFyYWN0ZXJcIikuY3NzKFwidHJhbnNmb3JtXCIsXCJyb3RhdGUoOTBkZWcpXCIpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChyaWdodCAhPSAwKSB7XG5cdFx0XHQkKFwiLmNoYXJhY3RlclwiKS5jc3MoXCJ0cmFuc2Zvcm1cIixcInJvdGF0ZSgyNzBkZWcpXCIpO1xuXHRcdH1cblx0XHRpZiAocGFuZGFYIDw9IDI1KSB7XG5cdFx0XHRpZiAocGVyZHUgPT0gZmFsc2UpIHtcblx0XHRcdFx0cGVyZHUgPSB0cnVlO1xuXHRcdFx0XHRsb3NlKCk7XG5cdFx0XHRcdC8vIHJlc2V0IHNpIGRlZmFpdGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChwYW5kYVggPj0gOTc1KSB7XG5cdFx0XHRpZiAoZ2FnbmUgPT0gZmFsc2UpIHtcblx0XHRcdFx0Z2FnbmUgPSB0cnVlO1xuXHRcdFx0XHR3aW4oKTtcblx0XHRcdFx0Ly8gcmVzZXQgc2kgdmljdG9pcmU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChpdGVtWSAtIHBhbmRhWSA8PSA0MCAmJiBpdGVtWSAtIHBhbmRhWSA+PSAtNDAgJiYgaXRlbVggLSBwYW5kYVggPD0gNDAgJiYgaXRlbVggLSBwYW5kYVggPj0gLTQwKSB7XG5cdFx0XHRpZiAoaGFzQ29pbiA9PSBmYWxzZSkge1xuXHRcdFx0XHRoYXNDb2luID0gdHJ1ZTtcblx0XHRcdFx0ZmVuMy5pbm5lckhUTUw9Jyc7XG5cdFx0XHRcdGNyZWF0ZWl0ZW0oKTtcblx0XHRcdFx0aWYgKGNvaW4gPCA1KSB7XG5cdFx0XHRcdFx0cGx1c2NvaW4oKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZXRUaW1lb3V0KCdoYXNDb2luID0gZmFsc2U7JywyMDAwKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGljZVkgLSBwYW5kYVkgPD0gNDAgJiYgaWNlWSAtIHBhbmRhWSA+PSAtNDAgJiYgaWNlWCAtIHBhbmRhWCA8PSA0MCAmJiBpY2VYIC0gcGFuZGFYID49IC00MCkge1xuXHRcdFx0aWYgKGhhc0ljZSA9PSBmYWxzZSkge1xuXHRcdFx0XHRoYXNJY2UgPSB0cnVlO1xuXHRcdFx0XHRmZW40LmlubmVySFRNTD0nJztcblx0XHRcdFx0Y3JlYXRlaWNlKCk7XG5cdFx0XHRcdGljZWVmZmVjdCgpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCdoYXNJY2UgPSBmYWxzZTsnLDIwMDApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwyMCk7XG59XG4iLCJsZXZlbCA9IDE7XG5yZXN0YXJ0ID0gZmFsc2U7XG5nYW1lTXVzaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWVNdXNpY1wiKTtcbmxvc2VNdXNpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbG9zZU11c2ljXCIpO1xud2luTXVzaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3dpbk11c2ljXCIpO1xuY2hhcmFjdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXJhY3RlcicpO1xuXG5mdW5jdGlvbiBsYXVuY2goKSB7IC8qIEF0IHRoZSBzdGFydCBvZiB0aGUgZ2FtZSAqL1xuICBpZiAocmVzdGFydCA9PSB0cnVlKSB7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmVzZXQoKTtcbiAgICBuZXh0TGV2ZWwoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBuZXh0TGV2ZWwoKSB7IC8qIHJlc2V0IGNvb3JkcyBhbmQgd2luZG93cyBpZiBuZXh0IGxldmVsICovXG4gIHBhbmRhWCA9IDEwMDtcblx0cGFuZGFZID0gMjc1O1xuXHRjaGFyYWN0ZXIuc3R5bGUubGVmdD1wYW5kYVg7XG5cdGNoYXJhY3Rlci5zdHlsZS50b3A9cGFuZGFZO1xuICAkKCcuZW5kLXdpbmRvdycpLmZhZGVPdXQoMTAwKTtcbiAgc2V0VGltZW91dChcImJhY2tDb3VudCgpO1wiLDEwMDApO1xuICBzdG9wTXVzaWMoZ2FtZU11c2ljKTtcblx0c3RvcE11c2ljKHdpbk11c2ljKTtcblx0c3RvcE11c2ljKGxvc2VNdXNpYyk7XG59XG5cbmZ1bmN0aW9uIGJhY2tDb3VudCgpIHsgLyogYmFja2NvdW50IGJlZm9yZSBzdGFydCAqL1xuICBpZiAobGFuZyA9PSAnZnInKSB7IC8qIGZvciBsYW5nICovXG4gICAgJCgnLmNvbnRleHQnKS5odG1sKCdOSVYgJytsZXZlbCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgJCgnLmNvbnRleHQnKS5odG1sKCdTVEFHRSAnK2xldmVsKTtcbiAgfVxuICAkKCcuY29udGV4dCcpLmZhZGVJbig1MDApO1xuICBzZXRUaW1lb3V0KFwiJCgnLmNvbnRleHQnKS5odG1sKCczJyk7XCIsMTAwMCk7XG4gIHNldFRpbWVvdXQoXCIkKCcuY29udGV4dCcpLmh0bWwoJzInKTtcIiwyMDAwKTtcbiAgc2V0VGltZW91dChcIiQoJy5jb250ZXh0JykuaHRtbCgnMScpO3N0YXJ0TXVzaWMoZ2FtZU11c2ljKTtcIiwzMDAwKTtcbiAgc2V0VGltZW91dChcIiQoJy5jb250ZXh0JykuaHRtbCgnR08hJyk7JCgnLmNvbnRleHQnKS5mYWRlT3V0KDUwMCk7a2V5UHJlc3NlZCgpO1wiLDQwMDApO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHN3aXRjaChsZXZlbCkgeyAvKiBzcGF3biByYXRlIGFmdGVyIHRpbWVvdXQgKi9cbiAgICAgIGNhc2UgMTpcbiAgICAgICAgYmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBzcGF3big4MCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBibG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHNwYXduKDEyMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBibG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHNwYXduKDE2MCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBnYWduZSA9IGZhbHNlO1xuICAgIHBlcmR1ID0gZmFsc2U7XG4gIH0sNDAwMCk7XG59XG5cbmZ1bmN0aW9uIGxvc2UoKSB7IC8qIGluIGNhc2Ugb2YgbG9zZSAqL1xuICBibG9ja2VkID0gdHJ1ZTsgLyogbWFrZSB0aGUgcGFuZGEgY2FuJ3QgbW92ZSAqL1xuICBjbGVhckludGVydmFsKGJyYWNvbG9vcCk7XG4gIHN0b3BNdXNpYyhnYW1lTXVzaWMpO1xuICBzdG9wTXVzaWMod2luTXVzaWMpO1xuXHRzdGFydE11c2ljKGxvc2VNdXNpYyk7XG4gICQoJy5lbmQtd2luZG93JykuY3NzKHtcbiAgICBcImJhY2tncm91bmQtaW1hZ2VcIjogXCJ1cmwoLi4vYXNzZXRzL2ltZy9wYW5kYS10cmlzdGUucG5nKVwiXG4gIH0pO1xuICAgIGlmIChsYW5nID09ICdmcicpIHtcbiAgICAkKCcuc2VudGVuY2UnKS5odG1sKFwiVm91cyBuZSBsJ2F2ZXogcGFzIHNhdXbDqS4gU2F1dmV6IGxlcyBlbiB2cmFpLCBmYWl0ZXMgdW4gZG9uICFcIik7XG4gIH1cbiAgZWxzZSB7XG4gICAgJCgnLnNlbnRlbmNlJykuaHRtbChcIllvdSBkaWRuJ3Qgc2F2ZSBoaW0uIFNhdmUgdGhlbSBpbiByZWFsIGxpZmUsIGRvbmF0ZSAhXCIpO1xuICB9XG4gICQoJy5zdGFnZScpLmZhZGVPdXQoKTtcbiAgaWYgKGxhbmcgPT0gJ2ZyJykge1xuICAgICQoJy5sYXVuY2gtYnV0dG9uJykuaHRtbCgnUsOpw6lzc2F5ZXInKTtcbiAgfVxuICBlbHNlIHtcbiAgICAkKCcubGF1bmNoLWJ1dHRvbicpLmh0bWwoJ1Jlc3RhcnQnKTtcbiAgfVxuICByZXN0YXJ0ID0gdHJ1ZTtcbiAgaWYgKGxhbmcgPT0gJ2ZyJykge1xuICAgICQoJy5jb250ZXh0JykuaHRtbCgnQ0FQVVRVUsOJJyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgJCgnLmNvbnRleHQnKS5odG1sKCdDQVVHSFQnKTtcbiAgfVxuICAkKCcuY29udGV4dCcpLmZhZGVJbig1MDApO1xuICBzZXRUaW1lb3V0KFwiJCgnLmNvbnRleHQnKS5mYWRlT3V0KDIwMCk7JCgnLmVuZC13aW5kb3cnKS5mYWRlSW4oNTAwKTtcIiwyMDAwKTtcbn1cblxuZnVuY3Rpb24gd2luKCkgeyAvKiBpbiBjYXNlIG9mIHdpbiAqL1xuICBibG9ja2VkID0gdHJ1ZTtcbiAgY2xlYXJJbnRlcnZhbChicmFjb2xvb3ApO1xuICBzdG9wTXVzaWMoZ2FtZU11c2ljKTtcbiAgc3RvcE11c2ljKGxvc2VNdXNpYyk7XG5cdHN0YXJ0TXVzaWMod2luTXVzaWMpO1xuICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgLyogbXVzaWMgbWFuYWdpbmcgKi9cblx0XHR3aW5NdXNpYy5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHR3aW5NdXNpYy5sb2FkKCk7ICAgIC8vcmVsb2FkIGF1ZGlvIGV2ZW50IChhbmQgcmVzZXQgY3VycmVudFRpbWUhKVxuXHRcdFx0d2luTXVzaWMucGxheSgpOyAgICAvL3BsYXkgYXVkaW8gZXZlbnQgZm9yIHN1YnNlcXVlbnQgJ2VuZGVkJyBldmVudHNcblx0XHR9LGZhbHNlKTtcblx0fSwxMDApO1xuICBpZiAobGFuZyA9PSAnZnInKSB7XG4gICAgJCgnLmxhdW5jaC1idXR0b24nKS5odG1sKCdOaXZlYXUgc3VpdmFudCcpO1xuICB9XG4gIGVsc2Uge1xuICAgICQoJy5sYXVuY2gtYnV0dG9uJykuaHRtbCgnTmV4dCBsZXZlbCcpO1xuICB9XG4gIGlmIChsZXZlbCA9PSAxKSB7XG4gICAgaWYgKGxhbmcgPT0gJ2ZyJykge1xuICAgICAgJCgnLnNlbnRlbmNlJykuaHRtbCgnTGUgcGFuZGEgZ8OpYW50IGEgw6l0w6kgYWpvdXTDqSDDoCBsYSBsaXN0ZSBkZXMgZXNww6hjZXMgbWVuYWPDqWVzIGTDqHMgMTk5MC4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAkKCcuc2VudGVuY2UnKS5odG1sKCdUaGUgZ2lhbnQgcGFuZGEgaGFzIGJlZW4gb24gdGhlIGVuZGFuZ2VyZWQgc3BlY2llcyBsaXN0IHNpbmNlIDE5OTAuJyk7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKGxldmVsID09IDIpIHtcbiAgICBpZiAobGFuZyA9PSAnZnInKSB7XG4gICAgICAkKCcuc2VudGVuY2UnKS5odG1sKFwiRGUgMTk3NCDDoCAxOTg5LCBsYSBtb2l0acOpIGRlcyBoYWJpdGF0cyBlbiBDaGluZSBhIMOpdMOpIGTDqXRydWl0ZSBwYXIgbCdhY3Rpdml0w6kgaHVtYWluZS5cIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJCgnLnNlbnRlbmNlJykuaHRtbCgnRnJvbSAxOTc0IHRvIDE5ODksIGhhbGYgb2YgdGhlIHBhbmRh4oCZcyBoYWJpdGF0IGluIENoaW5h4oCZcyBTaWNodWFuIGFyZWFzIHdhcyBkZXN0cm95ZWQgYnkgaHVtYW4gYWN0aXZpdHkuJyk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChsYW5nID09ICdmcicpIHtcbiAgICAgICQoJy5zZW50ZW5jZScpLmh0bWwoJ1ZvdXMgYXZleiBnYWduw6kgJytjb2luKycgZW4gc2F1dmFudCBsZSBwYW5kYSA7IHNhdXZleiBsZXMgdnJhaW1lbnQgZW4gZmFpc2FudCB1biBkb24gITxici8+U2kgdm91cyBmYWl0ZXMgdW4gZG9uLCAnK2NvaW4rJ+KCrCBzZXJvbnQgYWpvdXTDqXMgw6Agdm90cmUgZG9uIScpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICQoJy5zZW50ZW5jZScpLmh0bWwoJ1lvdSBlYXJuICcrY29pbisnIGNvaW5zIHNhdmluZyB0aGUgcGFuZGEuIFNhdmUgaGltIGluIHJlYWwgbGlmZSBieSBkb25hdGluZyAhPGJyLz5JZiB5b3UgZG9uYXRlLCAnK2NvaW4rJ+KCrCB3b3VsZCBiZSBhZGRlZCAhJyk7XG4gICAgfVxuICAgIGlmIChsYW5nID09ICdmcicpIHtcbiAgICAgICQoJy5sYXVuY2gtYnV0dG9uJykuaHRtbCgnRmFpcmUgdW4gZG9uJyk7XG4gICAgICAkKCcubGF1bmNoLWJ1dHRvbicpLmF0dHIoJ29uY2xpY2snLCd3aW5kb3cubG9jYXRpb249XCJodHRwczovL2ZhaXJldW5kb24ud3dmLmZyL1wiJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJCgnLmxhdW5jaC1idXR0b24nKS5odG1sKCdEb25hdGUnKTtcbiAgICAgICQoJy5sYXVuY2gtYnV0dG9uJykuYXR0cignb25jbGljaycsJ3dpbmRvdy5sb2NhdGlvbj1cImh0dHBzOi8vZmFpcmV1bmRvbi53d2YuZnIvXCInKTtcbiAgICB9XG4gIH1cbiAgaWYgKGxhbmcgPT0gJ2ZyJykge1xuICAgICQoJy5jb250ZXh0JykuaHRtbCgnU0FVVsOJIScpO1xuICB9XG4gIGVsc2Uge1xuICAgICQoJy5jb250ZXh0JykuaHRtbCgnU0FWRUQhJyk7XG4gIH1cbiAgJCgnLmNvbnRleHQnKS5mYWRlSW4oNTAwKTtcbiAgbGV2ZWwrKztcbiAgaWYgKGxhbmcgPT0gJ2ZyJykge1xuICAgICQoJy5jb250ZXh0JykuaHRtbCgnU0FVVsOJIScpO1xuICB9XG4gIGVsc2Uge1xuICAgICQoJy5jb250ZXh0JykuaHRtbCgnU0FWRUQhJyk7XG4gIH1cbiAgc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5jb250ZXh0JykuZmFkZU91dCgxMDAwKTt9KTtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBpZiAobGFuZyA9PSAnZnInKSB7XG4gICAgICAkKCcuY29udGV4dCcpLmh0bWwoJ05JViAnK2xldmVsKTtcbiAgICAgICQoJy5jb250ZXh0JykuaHRtbCgnTklWICcrbGV2ZWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICQoJy5jb250ZXh0JykuaHRtbCgnU1RBR0UgJytsZXZlbCk7XG4gICAgICAkKCcuY29udGV4dCcpLmh0bWwoJ1NUQUdFICcrbGV2ZWwpO1xuICAgIH1cbiAgfSwxNTAwKTtcbiAgc2V0VGltZW91dChcIiQoJy5lbmQtd2luZG93JykuZmFkZUluKDUwMCk7XCIsMjUwMCk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0TXVzaWMobXVzaWMpIHtcblx0bXVzaWMucGxheSgpO1xufVxuXG5mdW5jdGlvbiBzdG9wTXVzaWMobXVzaWMpIHtcblx0bXVzaWMucGF1c2UoKTtcblx0bXVzaWMuY3VycmVudFRpbWUgPSAwO1xufVxuIiwiLy8gR2VuZXJhdGVzIHRyZWVzXG5cbmZ1bmN0aW9uIHRyZWVzKCkge1xuICB0cmVYID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjkwMCkrMTAwO1xuICB0cmVZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjU1MCk7XG4gIGZlbjIuaW5uZXJIVE1MKz0nPGRpdiBjbGFzcz1cInRyZS0nK2orJ1wiPjwvZGl2Pic7XG4gICQoJy50cmUtJytqKS5jc3Moe1xuICAgIFwibGVmdFwiOiB0cmVYLFxuICAgIFwidG9wXCI6IHRyZVlcbiAgfSk7XG59XG5cbi8vIEdlbmVyYXRlcyB0cmVlcyByb3dzXG5cbmZ1bmN0aW9uIHJvd3RyZWVzKCkge1xuICBmb3IgKGsgPSAwOyBrIDwgMTM7IGsrKykge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb3ctdHJlZXMtdG9wJykuaW5uZXJIVE1MKz0nPGRpdiBjbGFzcz1cInJvdy10cmVlXCI+PC9kaXY+JztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucm93LXRyZWVzLWJvdHRvbScpLmlubmVySFRNTCs9JzxkaXYgY2xhc3M9XCJyb3ctdHJlZVwiPjwvZGl2Pic7XG4gIH1cbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIHJvd3RyZWVzKCk7XG4gIGZlbjIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyZWVzXCIpO1xuICBmb3IgKGogPSAwOyBqIDwgNTsgaisrKSB7XG4gICAgdHJlZXMoKTtcbiAgfVxufSk7XG4iLCIvLyBtYWluIHZhcnNcblxubmJkYWlzaWVzID0gNTA7XG5uYnRyZWVzID0gNTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
